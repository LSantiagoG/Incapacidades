---
import "../styles/styles.css";
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro | I-Reports</title>

    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icono.png" />
  </head>

  <body>
    <ul class="bg-bubbles">
      <li></li><li></li><li></li><li></li><li></li>
      <li></li><li></li><li></li><li></li><li></li>
    </ul>

    <div class="container">
      <div class="form-wrapper">
        <img src="/logos/incapacidades.jpg" alt="Logo" class="logo" />

        <div class="text-center">
          <h3 class="mb-0">Registro</h3>
          <p class="text-muted mt-2">Completa tus datos para crear una cuenta</p>
        </div>

        <form>
          <!-- Tipo de Persona -->
          <div class="form-group">
            <label for="tipoPersona">Tipo de Persona</label>
            <div class="input-icon-wrapper">
              <select id="tipoPersona" name="tipoPersona" required>
                <option value="">Selecciona una opción</option>
                <option value="natural">Natural</option>
                <option value="juridica">Jurídica</option>
              </select>
            </div>
          </div>

          <!-- Nombre -->
          <div class="form-group">
            <label for="nombre">Nombre</label>
            <div class="input-icon-wrapper">
              <img src="/name.png" alt="" class="field-icon" />
              <input type="text" id="nombre" name="nombre" placeholder="Nombre" required />
            </div>
          </div>

          <!-- Apellido -->
          <div class="form-group">
            <label for="apellido">Apellido</label>
            <div class="input-icon-wrapper">
              <img src="/name.png" alt="" class="field-icon" />
              <input type="text" id="apellido" name="apellido" placeholder="Apellido" required />
            </div>
          </div>

          <!-- Cédula del registrante -->
          <div class="form-group">
            <label for="nit">Cédula del registrante</label>
            <div class="input-icon-wrapper">
              <img src="/name.png" alt="" class="field-icon" />
              <input type="text" id="nit" name="nit" placeholder="1234567890" required />
            </div>
          </div>

          <!-- Nombre Empresa -->
          <div class="form-group">
            <label for="nombreEmpresa">Nombre de la Empresa</label>
            <div class="input-icon-wrapper">
              <img src="/name.png" alt="" class="field-icon" />
              <input type="text" id="nombreEmpresa" name="nombreEmpresa" placeholder="Nombre de la empresa" required />
            </div>
          </div>

          <!-- Correo -->
          <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <div class="input-icon-wrapper">
              <img src="/correo-electronico.png" alt="" class="field-icon" />
              <input type="email" id="email" name="email" placeholder="correo@ejemplo.com" required />
            </div>
          </div>

          <!-- Teléfono -->
          <div class="form-group">
            <label for="numero">Número de Teléfono</label>
            <div class="input-icon-wrapper">
              <img src="/phone.png" alt="" class="field-icon" />
              <input type="tel" id="numero" name="numero" placeholder="+57312345678" required />
            </div>
          </div>

          <!-- Campos para persona NATURAL -->
          <div id="camposNatural" style="display: none;">
            <!-- RUT PDF -->
            <div class="form-group">
              <label for="rutNatural">RUT (PDF)</label>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="rutNatural" name="rutNatural" accept=".pdf" required />
              </div>
            </div>

            <!-- Cédula del registrante -->
            <div class="form-group">
              <label for="cedulaNatural">Cédula del Registrante (PDF)</label>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="cedulaNatural" name="cedulaNatural" accept=".pdf" required />
              </div>
            </div>
          </div>

          <!-- Campos para persona JURÍDICA -->
          <div id="camposJuridica" style="display: none;">
            <!-- Cámara de Comercio -->
            <div class="form-group">
              <label for="camaraComercio">Cámara de Comercio (PDF)</label>
              <small>Debe tener una fecha de expedición no mayor a 30 días.</small>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="camaraComercio" name="camaraComercio" accept=".pdf" required />
              </div>
            </div>

            <!-- RUT -->
            <div class="form-group">
              <label for="rut">RUT (PDF)</label>
              <small>Debe tener una fecha de expedición no mayor a 30 días.</small>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="rut" name="rut" accept=".pdf" required />
              </div>
            </div>

            <!-- Cédula Representante Legal -->
            <div class="form-group">
              <label for="cedulaRepresentante">Cédula del Representante Legal (PDF)</label>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="cedulaRepresentante" name="cedulaRepresentante" accept=".pdf" required />
              </div>
            </div>

            <!-- Cédula Registrante -->
            <div class="form-group">
              <label for="cedulaRegistrante">Cédula del Registrante (PDF)</label>
              <div class="input-icon-wrapper">
                <img src="/pdf.png" alt="" class="field-icon" />
                <input type="file" id="cedulaRegistrante" name="cedulaRegistrante" accept=".pdf" required />
              </div>
            </div>
          </div>

          <button type="submit" class="btn">Registrar</button>
        </form>

        <div style="margin-top: 2rem; text-align: center;">
          <a href="/"><button class="btn">Volver al inicio de sesión</button></a>
        </div>

        <footer>© 2018 – 2025 Incapacidades.co, Hecho con ❤️</footer>
      </div>
    </div>

    <!-- Mostrar campos según tipo de persona -->
    <script>
  document.addEventListener('DOMContentLoaded', () => {
    const tipoPersona = document.getElementById('tipoPersona');
    const camposNatural = document.getElementById('camposNatural');
    const camposJuridica = document.getElementById('camposJuridica');

    function setRequired(inputs, value) {
      inputs.forEach(input => {
        if (value) {
          input.setAttribute('required', 'required');
        } else {
          input.removeAttribute('required');
        }
      });
    }

    tipoPersona.addEventListener('change', () => {
      const tipo = tipoPersona.value;

      const naturalInputs = camposNatural.querySelectorAll('input');
      const juridicaInputs = camposJuridica.querySelectorAll('input');

      if (tipo === 'natural') {
        camposNatural.style.display = 'block';
        camposJuridica.style.display = 'none';

        setRequired(naturalInputs, true);
        setRequired(juridicaInputs, false);

      } else if (tipo === 'juridica') {
        camposNatural.style.display = 'none';
        camposJuridica.style.display = 'block';

        setRequired(naturalInputs, false);
        setRequired(juridicaInputs, true);
      } else {
        camposNatural.style.display = 'none';
        camposJuridica.style.display = 'none';

        setRequired(naturalInputs, false);
        setRequired(juridicaInputs, false);
      }
    });
  });
</script>


    <!-- Cargar el JS de Supabase y lógica de envío -->
    <script type="module" src="/src/js/file-upload.js"></script>
  </body>
</html>
