---
// src/pages/rechazar.astro
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Rechazando solicitud...</title>
  </head>
  <body>
    <p>Procesando rechazo...</p>

    <script type="module">
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');

      fetch('/api/aprobar-o-rechazar', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          id,
          aprobado: false
        })
      })
      .then(res => res.json())
      .then(result => {
        document.body.innerHTML = result.success
          ? "<h1>❌ Solicitud rechazada con éxito</h1>"
          : "<h1>⚠️ Error al rechazar la solicitud</h1>";
      });
    </script>
  </body>
</html>
